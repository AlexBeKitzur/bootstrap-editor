!function(c,b){var e=c(window);window.console=window.console||{log:function(){},error:function(){}};var d="wysiwyg";var a=function(g,f){this.$el=g;this.init(f);};a.elIdx=0;a.prototype={init:function(f){this.options=f||{};this.options.type=(this.options.type||this.$el.data("edit-as")||d).toLowerCase();this.options.fullscreen=this.$el.data("fullscreen")!==undefined?this.$el.data("fullscreen"):true;this.options.width=this.$el.data("width")||this.$el.parent().width();this.options.height=this.$el.data("height")||"100";this.options.maxHeight=this.$el.data("max-height")||e.height()*0.6;this.$el.addClass("bootstrap-editor bootstrap-editor-"+this.options.type);this.$el.addClass(this.classId="bootstrap-editor-"+(a.elIdx++));this["init_"+this.options.type](f);},init_markdown:function(){},init_source:function(){},init_wysiwyg:function(){this.exec=function(j,i,k,h){this.tinymce.execCommand(j,i,k,h);};this.val=function(h){if(h!==undefined){this.tinymce.setContent(h);return this;}else{h=this.tinymce.getContent();if(this.$el.attr("placeholder")&&c(h).text().trim()===this.$el.attr("placeholder")){return"";}else{return h;}}};this.$el.hide();this.options.css=this.$el.data("tinymce-css")||"css/tinymce-content.css";this.options.tools=this.$el.data("tinymce-tools")||false;this.options.status=this.$el.data("tinymce-status")||false;if(!window.tinyMCE){console.error("tinyMCE not loaded");return false;}var g=this,f=this.$el;tinyMCE.init({mode:"specific_textareas",editor_selector:this.classId,content_css:this.options.css,width:this.options.width,height:this.options.height,theme_advanced_buttons1:"",plugins:"fullscreen,autoresize",fullscreen_new_window:false,autoresize_bottom_margin:20,autoresize_min_height:this.options.height,autoresize_max_height:this.options.maxHeight,fullscreen_settings:{theme_advanced_buttons1:""},setup:function(h){f.trigger("tinymce-setup",[g]);},oninit:function(){g.tinymce=tinyMCE.get(f.attr("id"));g.tinymce.$el=c("#"+g.tinymce.editorContainer).css({position:"relative",display:"inline-block"});g.tinymce.$el.addClass("bootstrap-mce-editor");g.tinymce.formatter.register("fontSizeHuge",{inline:"span",styles:{fontSize:"xx-large"}});g.$tools=c('<div class="tools"></div>');g.$tools.append(g.$btnFormatTools=c('<a class="tool-btn" href="#"><i class="icon-font"></i></a>'));g.$tools.append('<span class="tool-separator"></span>');g.$tools.append(g.$btnUpload=c('<a class="tool-btn" href="#"><i class="icon-paper-clip"></i></a>'));g.$tools.append(g.$formatTools=c('<div class="format-tools"><span class="arrow"></span></div>'));g.$formatTools.append(g.$btnFontFace=c('<a class="tool-btn" href="#"><label>Sans Serif</label><i class="icon-caret-down"></i><div class="select"></div></a>'));g.$formatTools.append('<span class="tool-separator"></span>');g.$formatTools.append(g.$btnFontSize=c('<a class="tool-btn" href="#"><i class="icon-text-height"></i><i class="icon-caret-down"></i><div class="select"></div></a>'));g.$btnFontSize.append(g.$btnFontSizeSelect=c('<div class="select"></div>'));g.$btnFontSizeSelect.append('<a class="font-size font-size-small" href="#">Small</a>');g.$btnFontSizeSelect.append('<a class="font-size font-size-normal" href="#">Normal</a>');g.$btnFontSizeSelect.append('<a class="font-size font-size-large" href="#">Large</a>');g.$btnFontSizeSelect.append('<a class="font-size font-size-huge" data-formatter="fontSize" data-formatter-value="Huge" href="#">Huge</a>');g.$formatTools.append('<span class="tool-separator"></span>');g.$formatTools.append(g.$btnBold=c('<a class="tool-btn" href="#" data-command="bold"><i class="icon-bold"></i></a>'));g.$formatTools.append(g.$btnItalic=c('<a class="tool-btn" href="#" data-command="italic"><i class="icon-italic"></i></a>'));g.$formatTools.append(g.$btnUnderline=c('<a class="tool-btn" href="#" data-command="underline"><i class="icon-underline"></i></a>'));g.$formatTools.append(g.$btnColor=c('<a class="tool-btn" href="#"><i class="icon-font icon-colors"></i><i class="icon-caret-down"></i><div class="select"></div></a>'));g.$formatTools.append('<span class="tool-separator"></span>');g.$formatTools.append(g.$btnOlist=c('<a class="tool-btn" href="#" data-command="insertorderedlist"><i class="icon-list-ol"></i></a>'));g.$formatTools.append(g.$btnUlist=c('<a class="tool-btn" href="#" data-command="insertunorderedlist"><i class="icon-list-ul"></i></a>'));g.$formatTools.append(g.$btnAlign=c('<a class="tool-btn" href="#"><i class="icon-align-left"></i><i class="icon-caret-down"></i></a>'));g.$btnAlign.append(g.$btnAlignSelect=c('<div class="select"></div>'));g.$btnAlignSelect.append(g.$btnAlignLeft=c('<a class="tool-btn" href="#" data-command="justifyleft"><i class="icon-align-left"></i></a>'));g.$btnAlignSelect.append(g.$btnAlignCenter=c('<a class="tool-btn" href="#" data-command="justifycenter"><i class="icon-align-center"></i></a>'));g.$btnAlignSelect.append(g.$btnAlignRight=c('<a class="tool-btn" href="#" data-command="justifyright"><i class="icon-align-right"></i></a>'));g.$btnAlignSelect.append("<br>");g.$btnAlignSelect.append(g.$btnOutdent=c('<a class="tool-btn" href="#" data-command="outdent"><i class="icon-indent-left"></i></a>'));g.$btnAlignSelect.append(g.$btnIndent=c('<a class="tool-btn" href="#" data-command="indent"><i class="icon-indent-right"></i></a>'));g.$btnAlignSelect.append(g.$btnQuote=c('<a class="tool-btn" href="#" data-command="formatblock" data-command-value="blockquote"><i class="icon-quote-left"></i></a>'));g.$formatTools.append('<span class="tool-separator"></span>');g.$formatTools.append(g.$btnRemove=c('<a class="tool-btn" href="#" data-command="removeformat"><i class="icon-remove"></i></a>'));g.$tools.find("a[data-command]").click(function(){var j=c(this);g.tinymce.execCommand(j.data("command"),true,j.data("command-value"));j.parent(".select").parent(".tool-btn").removeClass("active");return false;});g.$tools.find("a.tool-btn:has(> .select)").click(function(){c(this).toggleClass("active");return false;});g.$tools.find('a[data-formatter="fontSize"]').click(function(){var j=c(this).data("data-formatter-value");g.tinymce.formatter.toggle("fontSize"+j);return false;});g.$btnFormatTools.click(function(){g.tinymce.focus();g.tinymce.$el;g.$btnFormatTools.toggleClass("active");g.$formatTools[g.$btnFormatTools.hasClass("active")?"show":"hide"]();g.$tools.toggleClass("format-open",g.$btnFormatTools.hasClass("active"));return false;});var h=function(){g.$tools.find(".select:visible").each(function(){c(this).parent(".tool-btn").removeClass("active");});};c(document).on("click",h);f.bind("tinymce-focus",h);g.tinymce.$el.append(g.$tools);if(f.attr("placeholder")){if(!g.tinymce.getContent().length){g.tinymce.setContent(f.attr("placeholder"));c(g.tinymce.getDoc()).find("body").addClass("placeheld");}g.tinymce.onKeyDown.add(function(j,k){if(c(g.tinymce.getContent()).text().trim()===f.attr("placeholder")){g.tinymce.setContent("");c(g.tinymce.getDoc()).find("body").removeClass("placeheld");}});f.bind("tinymce-focus",function(){if(c(g.tinymce.getContent()).text().trim()===f.attr("placeholder")){g.tinymce.setContent("");}c(g.tinymce.getDoc()).find("body").removeClass("placeheld");});f.bind("tinymce-blur",function(){});g.tinymce.onExecCommand.add(function(j,k){if(k==="mceFullScreen"){c(g.tinymce.getDoc()).find("body").toggleClass("placeheld",g.tinymce.getContent()===f.attr("placeholder"));}});}g.tinymce.onEvent.add(function(j,k){f.trigger("tinymce-"+k.type,[g]);});c(g.tinymce.getDoc()).contents().find("body").focus(function(){g.tinymce.$el.addClass("has-focus");f.trigger("tinymce-focus",[g]);});c(g.tinymce.getDoc()).contents().find("body").blur(function(){g.tinymce.$el.removeClass("has-focus");f.trigger("tinymce-blur",[g]);});if(g.options.fullscreen){var i=c('<a href="#"><span class="fullscreen"></span></a>').css({position:"absolute",top:"5px",right:"5px"});g.tinymce.$el.append(i);i.click(function(){if(f.attr("placeholder")){if(c(g.tinymce.getContent()).text().trim()===f.attr("placeholder")){g.tinymce.setContent("");}}g.tinymce.execCommand("mceFullScreen");var j=function(k){if(k.keyCode==27){tinyMCE.execCommand("mceFullScreen");e.unbind("keyup",j);return false;}};e.on("keyup",j);return false;});}if(!g.options.tools){g.tinymce.$el.find(".mceToolbar").parent().hide();}if(!g.options.status){g.tinymce.$el.find(".mceStatusbar").parent().hide();}f.trigger("init",[g,"tinymce"]);f.trigger("tinymce-init",[g]);}});}};c.fn[b]=function(g){var f=Array.prototype.slice.apply(arguments);return this.each(function(j,l){var h=c(l),k=h.data(b);if(!k){h.data(b,k=new a(h,typeof g!=="string"?g:{}));}if(typeof g==="string"){k[g].apply(k,f.slice(1));}});};c("[data-edit-as]").each(function(){c(this)[b]();});c.valHooks.textarea={set:function(g,h){var f=c(g);if(f.data(b)){f.data(b).val(h);}else{g.value=h;}},get:function(g){var f=c(g);if(f.data(b)){return f.data(b).val();}else{return g.value;}}};}(jQuery,"editor");