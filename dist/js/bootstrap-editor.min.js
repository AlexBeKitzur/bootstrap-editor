!function(e,c){var g=e(window),d=e("body");window.console=window.console||{log:function(){},error:function(){}};var f="wysiwyg";var a=function(i,h){this.$el=i;this.init(h);};a.elIdx=0;a.prototype={init:function(h){this.options=h||{};this.options.type=(this.options.type||this.$el.data("edit-as")||f).toLowerCase();this.options.fullscreen=this.$el.data("fullscreen")!==undefined?this.$el.data("fullscreen"):true;this.options.width=this.$el.data("width")||this.$el.parent().width();this.options.height=this.$el.data("height")||"100";this.options.maxHeight=this.$el.data("max-height")||g.height()*0.6;this.$el.addClass("bootstrap-editor bootstrap-editor-"+this.options.type);this.$el.addClass(this.classId="bootstrap-editor-"+(a.elIdx++));this["init_"+this.options.type](h);},init_markdown:function(){},init_source:function(){},init_wysiwyg:function(){this.exec=function(l,k,m,j){this.tinymce.execCommand(l,k,m,j);};this.val=function(j){if(j!==undefined){this.tinymce.setContent(j);return this;}else{j=this.tinymce.getContent();if(this.$el.attr("placeholder")&&e(j).text().trim()===this.$el.attr("placeholder")){return"";}else{return j;}}};this.$el.hide();this.options.css=this.$el.data("tinymce-css")||"css/tinymce-content.css";this.options.tools=this.$el.data("tinymce-tools")||false;this.options.status=this.$el.data("tinymce-status")||false;if(!window.tinyMCE){console.error("tinyMCE not loaded");return false;}var i=this,h=this.$el;tinyMCE.init({mode:"specific_textareas",editor_selector:this.classId,content_css:this.options.css,width:this.options.width,height:this.options.height,theme_advanced_buttons1:"",plugins:"fullscreen,autoresize",fullscreen_new_window:false,autoresize_bottom_margin:20,autoresize_min_height:this.options.height,autoresize_max_height:this.options.maxHeight,fullscreen_settings:{theme_advanced_buttons1:""},setup:function(j){h.trigger("tinymce-setup",[i]);},oninit:function(){i.tinymce=tinyMCE.get(h.attr("id"));i.tinymce.$el=e("#"+i.tinymce.editorContainer).css({position:"relative",display:"inline-block"});i.tinymce.$el.addClass("bootstrap-mce-editor");i.tinymce.formatter.register("fontSizeHuge",{inline:"span",styles:{fontSize:"xx-large"}});i.$tools=e('<div class="tools"></div>');i.$tools.append(i.$btnFormatTools=e('<a class="tool-btn" href="#"><i class="icon-font"></i></a>'));i.$tools.append('<span class="tool-separator"></span>');i.$tools.append(i.$btnUpload=e('<a class="tool-btn" href="#"><i class="icon-paper-clip"></i></a>'));i.$tools.append(i.$formatTools=e('<div class="format-tools"><span class="arrow"></span></div>'));i.$formatTools.append(i.$btnFontFace=e('<a class="tool-btn" href="#"><label>Sans Serif</label><i class="icon-caret-down"></i><div class="select"></div></a>'));i.$formatTools.append('<span class="tool-separator"></span>');i.$formatTools.append(i.$btnFontSize=e('<a class="tool-btn" href="#"><i class="icon-text-height"></i><i class="icon-caret-down"></i><div class="select"></div></a>'));i.$btnFontSize.append(i.$btnFontSizeSelect=e('<div class="select"></div>'));i.$btnFontSizeSelect.append('<a class="font-size font-size-small" href="#">Small</a>');i.$btnFontSizeSelect.append('<a class="font-size font-size-normal" href="#">Normal</a>');i.$btnFontSizeSelect.append('<a class="font-size font-size-large" href="#">Large</a>');i.$btnFontSizeSelect.append('<a class="font-size font-size-huge" data-formatter="fontSize" data-formatter-value="Huge" href="#">Huge</a>');i.$formatTools.append('<span class="tool-separator"></span>');i.$formatTools.append(i.$btnBold=e('<a class="tool-btn" href="#" data-command="bold"><i class="icon-bold"></i></a>'));i.$formatTools.append(i.$btnItalic=e('<a class="tool-btn" href="#" data-command="italic"><i class="icon-italic"></i></a>'));i.$formatTools.append(i.$btnUnderline=e('<a class="tool-btn" href="#" data-command="underline"><i class="icon-underline"></i></a>'));i.$formatTools.append(i.$btnColor=e('<a class="tool-btn" href="#"><i class="icon-font icon-colors"></i><i class="icon-caret-down"></i><div class="select"></div></a>'));i.$formatTools.append('<span class="tool-separator"></span>');i.$formatTools.append(i.$btnOlist=e('<a class="tool-btn" href="#" data-command="insertorderedlist"><i class="icon-list-ol"></i></a>'));i.$formatTools.append(i.$btnUlist=e('<a class="tool-btn" href="#" data-command="insertunorderedlist"><i class="icon-list-ul"></i></a>'));i.$formatTools.append(i.$btnAlign=e('<a class="tool-btn" href="#"><i class="icon-align-left"></i><i class="icon-caret-down"></i></a>'));i.$btnAlign.append(i.$btnAlignSelect=e('<div class="select"></div>'));i.$btnAlignSelect.append(i.$btnAlignLeft=e('<a class="tool-btn" href="#" data-command="justifyleft"><i class="icon-align-left"></i></a>'));i.$btnAlignSelect.append(i.$btnAlignCenter=e('<a class="tool-btn" href="#" data-command="justifycenter"><i class="icon-align-center"></i></a>'));i.$btnAlignSelect.append(i.$btnAlignRight=e('<a class="tool-btn" href="#" data-command="justifyright"><i class="icon-align-right"></i></a>'));i.$btnAlignSelect.append("<br>");i.$btnAlignSelect.append(i.$btnOutdent=e('<a class="tool-btn" href="#" data-command="outdent"><i class="icon-indent-left"></i></a>'));i.$btnAlignSelect.append(i.$btnIndent=e('<a class="tool-btn" href="#" data-command="indent"><i class="icon-indent-right"></i></a>'));i.$btnAlignSelect.append(i.$btnQuote=e('<a class="tool-btn" href="#" data-command="formatblock" data-command-value="blockquote"><i class="icon-quote-left"></i></a>'));i.$formatTools.append('<span class="tool-separator"></span>');i.$formatTools.append(i.$btnRemove=e('<a class="tool-btn" href="#" data-command="removeformat"><i class="icon-remove"></i></a>'));i.$tools.find("a[data-command]").click(function(){var l=e(this);i.tinymce.execCommand(l.data("command"),true,l.data("command-value"));l.parent(".select").parent(".tool-btn").removeClass("active");return false;});i.$tools.find("a.tool-btn:has(> .select)").click(function(){e(this).toggleClass("active");return false;});i.$tools.find('a[data-formatter="fontSize"]').click(function(){var l=e(this).data("data-formatter-value");i.tinymce.formatter.toggle("fontSize"+l);return false;});i.$btnFormatTools.click(function(){i.tinymce.focus();i.tinymce.$el;i.$btnFormatTools.toggleClass("active");i.$formatTools[i.$btnFormatTools.hasClass("active")?"show":"hide"]();i.$tools.toggleClass("format-open",i.$btnFormatTools.hasClass("active"));return false;});var j=function(){i.$tools.find(".select:visible").each(function(){e(this).parent(".tool-btn").removeClass("active");});};e(document).on("click",j);h.bind("tinymce-focus",j);i.tinymce.$el.append(i.$tools);i.tinymce.$el.append('<div class="dropzone"><span>Drop files here</span></div>');if(h.attr("placeholder")){if(!i.tinymce.getContent().length){i.tinymce.setContent(h.attr("placeholder"));e(i.tinymce.getDoc()).find("body").addClass("placeheld");}i.tinymce.onKeyDown.add(function(l,m){if(e(i.tinymce.getContent()).text().trim()===h.attr("placeholder")){i.tinymce.setContent("");e(i.tinymce.getDoc()).find("body").removeClass("placeheld");}});h.bind("tinymce-focus",function(){if(e(i.tinymce.getContent()).text().trim()===h.attr("placeholder")){i.tinymce.setContent("");}e(i.tinymce.getDoc()).find("body").removeClass("placeheld");});h.bind("tinymce-blur",function(){});i.tinymce.onExecCommand.add(function(l,m){if(m==="mceFullScreen"){e(i.tinymce.getDoc()).find("body").toggleClass("placeheld",i.tinymce.getContent()===h.attr("placeholder"));}});}i.tinymce.onEvent.add(function(l,m){h.trigger("tinymce-"+m.type,[i]);});e(i.tinymce.getDoc()).contents().find("body").focus(function(){i.tinymce.$el.addClass("has-focus");h.trigger("tinymce-focus",[i]);});e(i.tinymce.getDoc()).contents().find("body").blur(function(){i.tinymce.$el.removeClass("has-focus");h.trigger("tinymce-blur",[i]);});if(i.options.fullscreen){var k=e('<a href="#"><span class="fullscreen"></span></a>').css({position:"absolute",top:"5px",right:"5px"});i.tinymce.$el.append(k);k.click(function(){if(h.attr("placeholder")){if(e(i.tinymce.getContent()).text().trim()===h.attr("placeholder")){i.tinymce.setContent("");}}i.tinymce.execCommand("mceFullScreen");var l=function(m){if(m.keyCode==27){tinyMCE.execCommand("mceFullScreen");g.unbind("keyup",l);return false;}};g.on("keyup",l);return false;});}if(!i.options.tools){i.tinymce.$el.find(".mceToolbar").parent().hide();}if(!i.options.status){i.tinymce.$el.find(".mceStatusbar").parent().hide();}h.trigger("init",[i,"tinymce"]);h.trigger("tinymce-init",[i]);}});}};var b;g.on("dragover",function(h){clearTimeout(b);d.addClass("dragging");});g.on("dragend",function(h){clearTimeout(b);b=setTimeout(function(){d.removeClass("dragging");},500);});g.on("dragleave",function(h){clearTimeout(b);b=setTimeout(function(){d.removeClass("dragging");},500);});e.fn[c]=function(i){var h=Array.prototype.slice.apply(arguments);return this.each(function(k,m){var j=e(m),l=j.data(c);if(!l){j.data(c,l=new a(j,typeof i!=="string"?i:{}));}if(typeof i==="string"){l[i].apply(l,h.slice(1));}});};e("[data-edit-as]").each(function(){e(this)[c]();});e.valHooks.textarea={set:function(i,j){var h=e(i);if(h.data(c)){h.data(c).val(j);}else{i.value=j;}},get:function(i){var h=e(i);if(h.data(c)){return h.data(c).val();}else{return i.value;}}};}(jQuery,"editor");